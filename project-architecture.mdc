---
alwaysApply: true
tags: [architecture, guidelines, typescript, nextjs]
---

# PDF Page Splitter - Project Architecture

## í”„ë¡œì íŠ¸ ê°œìš”

**PDF Page Splitter**ëŠ” ì‚¬ìš©ìê°€ PDF íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ ê° í˜ì´ì§€ë¥¼ ë…ë¦½ì ì¸ PDF íŒŒì¼ë¡œ ë¶„í• í•  ìˆ˜ ìˆëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

### í•µì‹¬ ê°€ì¹˜
- **í”„ë¼ì´ë²„ì‹œ ë³´ì¥**: í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì²˜ë¦¬ë¡œ ì„œë²„ ì „ì†¡ ìµœì†Œí™”
- **ë¹ ë¥¸ ì²˜ë¦¬**: ë¡œì»¬ ì²˜ë¦¬ë¡œ ì¦‰ì‹œ ê²°ê³¼ ì œê³µ
- **ê°„í¸í•œ ì‚¬ìš©**: ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì¸í„°í˜ì´ìŠ¤

---

## ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **Framework**: Next.js 15 (React 19)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **PDF Processing**: pdf-lib, pdfjs-dist
- **File Handling**: file-saver, jszip

### Backend
- **Runtime**: Node.js
- **Framework**: Next.js API Routes
- **File Upload**: formidable
- **Server**: Express (optional)

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
D:\project\PDF\
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx               # Root layout (ë©”íƒ€ë°ì´í„°, í°íŠ¸, ë‹¤í¬ëª¨ë“œ ì„¤ì •)
â”‚   â”œâ”€â”€ page.tsx                 # ë©”ì¸ í˜ì´ì§€ (3ë‹¨ê³„ ìƒíƒœ: idle/processing/complete)
â”‚   â””â”€â”€ globals.css              # ì „ì—­ ìŠ¤íƒ€ì¼ (Tailwind + ë‹¤í¬ëª¨ë“œ CSS ë³€ìˆ˜)
â”‚
â”œâ”€â”€ components/                   # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ DragDropUpload.tsx       # ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì—…ë¡œë“œ UI
â”‚   â”œâ”€â”€ PDFProcessor.tsx         # PDF í˜ì´ì§€ ë¶„í•  ì²˜ë¦¬ ë¡œì§
â”‚   â”œâ”€â”€ ProcessingView.tsx       # ì²˜ë¦¬ ì§„í–‰ ìƒíƒœ UI
â”‚   â”œâ”€â”€ ResultView.tsx           # ê²°ê³¼ í™”ë©´ (ë‹¤ìš´ë¡œë“œ ë²„íŠ¼, ê·¸ë¦¬ë“œ)
â”‚   â”œâ”€â”€ PagePreview.tsx          # í˜ì´ì§€ ë¯¸ë¦¬ë³´ê¸° ì¹´ë“œ
â”‚   â”œâ”€â”€ PreviewGrid.tsx          # ì¸ë„¤ì¼ ê·¸ë¦¬ë“œ ë·°
â”‚   â”œâ”€â”€ ThemeToggle.tsx          # ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ í† ê¸€ ë²„íŠ¼
â”‚   â””â”€â”€ ui/                      # shadcn/ui ì»´í¬ë„ŒíŠ¸
â”‚       â”œâ”€â”€ button.tsx           # ë²„íŠ¼ (outline/default/secondary ë³€í˜•)
â”‚       â”œâ”€â”€ card.tsx             # ì¹´ë“œ
â”‚       â”œâ”€â”€ progress.tsx         # í”„ë¡œê·¸ë ˆìŠ¤ ë°”
â”‚       â”œâ”€â”€ badge.tsx            # ë±ƒì§€
â”‚       â””â”€â”€ alert.tsx            # ì•Œë¦¼
â”‚
â”œâ”€â”€ hooks/                       # Custom Hooks
â”‚   â”œâ”€â”€ useProgress.ts           # ì§„í–‰ ìƒíƒœ ê´€ë¦¬ Hook
â”‚   â””â”€â”€ useTheme.ts              # í…Œë§ˆ ìƒíƒœ ê´€ë¦¬ Hook (localStorage ì—°ë™)
â”‚
â”œâ”€â”€ lib/                         # ìœ í‹¸ë¦¬í‹° ë¼ì´ë¸ŒëŸ¬ë¦¬
â”‚   â”œâ”€â”€ pdf/
â”‚   â”‚   â”œâ”€â”€ splitter.ts         # PDFSplitter í´ë˜ìŠ¤ (pdf-lib ë˜í¼)
â”‚   â”‚   â”œâ”€â”€ validator.ts        # PDF íŒŒì¼ ê²€ì¦ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ renderer.ts         # PDF ë Œë”ë§ (ì¸ë„¤ì¼ ìƒì„±)
â”‚   â”‚   â””â”€â”€ merger.ts           # PDF ë³‘í•© ê¸°ëŠ¥
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ download.ts         # íŒŒì¼ ë‹¤ìš´ë¡œë“œ ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ utils.ts                # ê³µí†µ ìœ í‹¸ë¦¬í‹° (cn í•¨ìˆ˜ ë“±)
â”‚
â”œâ”€â”€ types/                       # TypeScript íƒ€ì… ì •ì˜
â”‚   â””â”€â”€ pdf.ts                  # ProcessedPage, PDFProcessorState ë“±
â”‚
â”œâ”€â”€ public/                      # ì •ì  íŒŒì¼ (í˜„ì¬ ë¯¸ì‚¬ìš©)
â”‚
â”œâ”€â”€ package.json                 # í”„ë¡œì íŠ¸ ì˜ì¡´ì„±
â”œâ”€â”€ tsconfig.json               # TypeScript ì„¤ì •
â”œâ”€â”€ tailwind.config.js          # Tailwind CSS ì„¤ì • (darkMode: 'class')
â”œâ”€â”€ components.json             # shadcn/ui ì„¤ì •
â”œâ”€â”€ next.config.js              # Next.js ì„¤ì •
â”œâ”€â”€ init.md                     # PRD (Product Requirements Document)
â”œâ”€â”€ init-execution-plan.md      # ì‹¤í–‰ ê³„íš
â””â”€â”€ project-architecture.mdc    # í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜ ë¬¸ì„œ (ë³¸ ë¬¸ì„œ)
```

---

## ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì‚¬ìš©ì ë¸Œë¼ìš°ì €                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Next.js App (React 19)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Pages/Routes       â”‚   Components Layer                    â”‚
â”‚                      â”‚                                       â”‚
â”‚  â€¢ app/page.tsx      â”‚  â€¢ DragDropUpload    (ì—…ë¡œë“œ UI)      â”‚
â”‚    - Main UI         â”‚  â€¢ PDFProcessor      (ë¶„í•  ì²˜ë¦¬)      â”‚
â”‚    - State Mgmt      â”‚  â€¢ ProcessingView    (ì§„í–‰ ìƒíƒœ)      â”‚
â”‚    - ThemeToggle     â”‚  â€¢ ResultView        (ê²°ê³¼ í™”ë©´)      â”‚
â”‚                      â”‚  â€¢ PreviewGrid       (ì¸ë„¤ì¼ ê·¸ë¦¬ë“œ)  â”‚
â”‚  â€¢ app/layout.tsx    â”‚  â€¢ PagePreview       (ì¸ë„¤ì¼ ì¹´ë“œ)    â”‚
â”‚    - Dark mode       â”‚  â€¢ ThemeToggle       (ë‹¤í¬ ëª¨ë“œ)      â”‚
â”‚    - Metadata        â”‚  â€¢ ui/*              (shadcn/ui)     â”‚
â”‚                      â”‚                                       â”‚
â”‚  â€¢ app/globals.css   â”‚                                       â”‚
â”‚    - Tailwind        â”‚                                       â”‚
â”‚    - Dark variables  â”‚                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      Business Logic Layer                    â”‚
â”‚                                                              â”‚
â”‚  lib/pdf/                       lib/utils/                  â”‚
â”‚  â€¢ PDFSplitter                  â€¢ download                  â”‚
â”‚    - loadPDF()                  â€¢ File save helpers         â”‚
â”‚    - splitPages()               â€¢ utils.ts (cn í•¨ìˆ˜)        â”‚
â”‚    - createSinglePagePDF()                                  â”‚
â”‚  â€¢ PDFRenderer                  hooks/                      â”‚
â”‚    - renderPage()               â€¢ useProgress               â”‚
â”‚    - generateThumbnail()        â€¢ useTheme                  â”‚
â”‚    - generateAllThumbnails()      (localStorage ì—°ë™)       â”‚
â”‚  â€¢ PDFMerger                                                â”‚
â”‚    - mergePages()                                           â”‚
â”‚  â€¢ validator                                                â”‚
â”‚    - File validation                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    External Libraries                        â”‚
â”‚                                                              â”‚
â”‚  â€¢ pdf-lib          (PDF ìƒì„±/ì¡°ì‘)                         â”‚
â”‚  â€¢ pdfjs-dist       (PDF ë Œë”ë§/ë¯¸ë¦¬ë³´ê¸°)                    â”‚
â”‚  â€¢ jszip            (ë‹¤ì¤‘ íŒŒì¼ ì••ì¶•)                         â”‚
â”‚  â€¢ file-saver       (íŒŒì¼ ë‹¤ìš´ë¡œë“œ)                          â”‚
â”‚  â€¢ lucide-react     (ì•„ì´ì½˜)                                â”‚
â”‚  â€¢ tailwindcss      (ìŠ¤íƒ€ì¼ë§)                              â”‚
â”‚  â€¢ class-variance-authority (ë²„íŠ¼ ë³€í˜•)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ë°ì´í„° í”Œë¡œìš°

### 1. PDF ì—…ë¡œë“œ í”Œë¡œìš° (í´ë¼ì´ì–¸íŠ¸ ì „ìš©)

```
ì‚¬ìš©ì íŒŒì¼ ì„ íƒ/ë“œë¡­
    â†“
DragDropUpload ì»´í¬ë„ŒíŠ¸
    â†“
handleFileUpload(file: File)
    â†“
page.tsx: setCurrentFile(file)
page.tsx: setAppState('processing')
    â†“
PDFProcessor ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸
    â†“
ìë™ìœ¼ë¡œ ë¶„í•  ì‹œì‘
```

### 2. PDF ë¶„í•  í”Œë¡œìš°

```
PDFProcessor ì»´í¬ë„ŒíŠ¸ ì‹¤í–‰
    â†“
PDFSplitter.loadPDF(file)
    â†“
ìƒíƒœ: 'loading' â†’ onStateChange ì½œë°±
    â†“
PDFSplitter.splitPages(pdfDoc, fileName)
    â”œâ”€ for each page:
    â”‚   â”œâ”€ PDFDocument.create()
    â”‚   â”œâ”€ copyPages([pageIndex])
    â”‚   â”œâ”€ newPdf.save() â†’ Uint8Array
    â”‚   â””â”€ onProgress(%) ì½œë°± â†’ 'processing' ìƒíƒœ
    â†“
onProcessComplete(pages: ProcessedPage[])
    â†“
page.tsx: setProcessedPages(pages)
page.tsx: setAppState('complete')
    â†“
ResultView í‘œì‹œ
    â†“
PreviewGridì—ì„œ ì¸ë„¤ì¼ ë Œë”ë§ ì‹œì‘
```

### 3. ì¸ë„¤ì¼ ë Œë”ë§ í”Œë¡œìš°

```
PreviewGrid ë§ˆìš´íŠ¸
    â†“
ê° PagePreviewì—ì„œ useEffect ì‹¤í–‰
    â†“
PDFRenderer.generateThumbnail(page.data, 1, 200)
    â†“
PDF.js ë™ì  ë¡œë“œ (í´ë¼ì´ì–¸íŠ¸ ì „ìš©)
    â†“
Canvasì— ë Œë”ë§
    â†“
Base64 ì´ë¯¸ì§€ ìƒì„±
    â†“
<img src={thumbnail} /> í‘œì‹œ
```

### 4. ë‹¤ìš´ë¡œë“œ í”Œë¡œìš°

```
ì‚¬ìš©ì ë‹¤ìš´ë¡œë“œ ì„ íƒ
    â”œâ”€ ê°œë³„ í˜ì´ì§€ ë‹¤ìš´ë¡œë“œ (PagePreview)
    â”‚   â†“
    â”‚   handleDownload(page)
    â”‚   â†“
    â”‚   new Blob([page.data])
    â”‚   â†“
    â”‚   file-saver.saveAs(blob, fileName)
    â”‚
    â””â”€ ì „ì²´ ZIP ë‹¤ìš´ë¡œë“œ (ResultView)
        â†“
        handleDownloadAll()
        â†“
        JSZip.create()
        â†“
        for each page: zip.file(page.fileName, page.data)
        â†“
        zip.generateAsync({ type: 'blob' })
        â†“
        file-saver.saveAs(zipBlob, `${baseName}_split.zip`)
```

### 5. í…Œë§ˆ ì „í™˜ í”Œë¡œìš°

```
ì‚¬ìš©ì ThemeToggle í´ë¦­
    â†“
useTheme.toggleTheme()
    â†“
newTheme = theme === 'dark' ? 'light' : 'dark'
    â†“
localStorage.setItem('theme', newTheme)
    â†“
document.documentElement.classList.toggle('dark')
    â†“
CSS ë³€ìˆ˜ ìë™ ì „í™˜ (.dark í´ë˜ìŠ¤)
    â†“
ëª¨ë“  ì»´í¬ë„ŒíŠ¸ ìƒ‰ìƒ ì—…ë°ì´íŠ¸
```

---

## ì£¼ìš” ì»´í¬ë„ŒíŠ¸ ì„¤ëª…

### 1. `app/page.tsx` (ë©”ì¸ í˜ì´ì§€)

**ì—­í• **: ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœ ê´€ë¦¬ ë° ë·° ì „í™˜

**ì£¼ìš” State**:
- `appState`: 'idle' | 'processing' | 'complete' (3ë‹¨ê³„ ìƒíƒœ)
- `currentFile`: í˜„ì¬ ì²˜ë¦¬ ì¤‘ì¸ File ê°ì²´
- `processedPages`: ë¶„í• ëœ í˜ì´ì§€ ë°ì´í„° ë°°ì—´
- `processingState`: ì²˜ë¦¬ ì§„í–‰ ìƒíƒœ (PDFProcessorState)

**ì£¼ìš” í•¨ìˆ˜**:
- `handleFileUpload(file)`: íŒŒì¼ ì—…ë¡œë“œ ë° ìë™ ë¶„í•  ì‹œì‘
- `handleProcessComplete(pages)`: ë¶„í•  ì™„ë£Œ ì‹œ ì²˜ë¦¬
- `handleProcessError(error)`: ì—ëŸ¬ ì²˜ë¦¬
- `handleReset()`: ì´ˆê¸° ìƒíƒœë¡œ ë¦¬ì…‹

**ë·° ì „í™˜**:
- `appState === 'idle'`: DragDropUpload (ì—…ë¡œë“œ í™”ë©´)
- `appState === 'processing'`: ProcessingView (ì§„í–‰ ìƒíƒœ)
- `appState === 'complete'`: ResultView (ê²°ê³¼ + ë‹¤ìš´ë¡œë“œ)

### 2. `components/PDFProcessor.tsx`

**ì—­í• **: PDF íŒŒì¼ì„ í˜ì´ì§€ë³„ë¡œ ë¶„í• í•˜ëŠ” í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

**Props**:
- `file`: ì²˜ë¦¬í•  File ê°ì²´
- `onProcessComplete`: ì™„ë£Œ ì½œë°±
- `onError`: ì—ëŸ¬ ì½œë°±
- `onStateChange`: ìƒíƒœ ì—…ë°ì´íŠ¸ ì½œë°±

**ë™ì‘ ë°©ì‹**:
1. `useEffect`ë¡œ file ë³€ê²½ ê°ì§€
2. `PDFSplitter` ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
3. `loadPDF()` â†’ `splitPages()` ìˆœì°¨ ì‹¤í–‰
4. ê° í˜ì´ì§€ ì²˜ë¦¬ ì‹œ `onProgress` ì½œë°±ìœ¼ë¡œ ì§„í–‰ ìƒíƒœ ì—…ë°ì´íŠ¸
5. ì™„ë£Œ ì‹œ `ProcessedPage[]` ë°°ì—´ ë°˜í™˜

### 3. `lib/pdf/splitter.ts` (PDFSplitter í´ë˜ìŠ¤)

**ì—­í• **: pdf-lib ë˜í¼ í´ë˜ìŠ¤, PDF ì²˜ë¦¬ ë¡œì§ ìº¡ìŠí™”

**ì£¼ìš” ë©”ì„œë“œ**:

```typescript
class PDFSplitter {
  // PDF íŒŒì¼ ë¡œë“œ
  async loadPDF(file: File): Promise<PDFDocument>

  // ëª¨ë“  í˜ì´ì§€ ë¶„í• 
  async splitPages(
    pdfDoc: PDFDocument,
    originalFileName: string
  ): Promise<ProcessedPage[]>

  // ë‹¨ì¼ í˜ì´ì§€ ì¶”ì¶œ
  async createSinglePagePDF(
    pdfDoc: PDFDocument,
    pageIndex: number
  ): Promise<Uint8Array>

  // íŒŒì¼ëª… ìƒì„± (ì˜ˆ: document_page_001.pdf)
  private generateFileName(
    originalFileName: string,
    pageNumber: number
  ): string
}
```

**ì²˜ë¦¬ íë¦„**:
- File â†’ ArrayBuffer â†’ PDFDocument (pdf-lib)
- for each page:
  - ìƒˆ PDFDocument ìƒì„±
  - ì›ë³¸ì—ì„œ í•´ë‹¹ í˜ì´ì§€ ë³µì‚¬
  - Uint8Arrayë¡œ ì €ì¥
  - ProcessedPage ê°ì²´ ìƒì„±

### 4. `components/ResultView.tsx`

**ì—­í• **: ë¶„í•  ì™„ë£Œ í›„ ê²°ê³¼ í™”ë©´ í‘œì‹œ

**Props**:
- `pages`: ProcessedPage[]
- `originalFileName`: ì›ë³¸ íŒŒì¼ëª…
- `onReset`: ì´ˆê¸° í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸° ì½œë°±

**ê¸°ëŠ¥**:
- ì„±ê³µ ì•Œë¦¼ (Alert)
- Download All (ZIP) ë²„íŠ¼
- Split Another ë²„íŠ¼ (ìƒˆ íŒŒì¼ ì—…ë¡œë“œ)
- PreviewGrid ë Œë”ë§

### 5. `components/PreviewGrid.tsx`

**ì—­í• **: í˜ì´ì§€ ì¸ë„¤ì¼ ê·¸ë¦¬ë“œ í‘œì‹œ

**Props**:
- `pages`: ProcessedPage[]

**ê¸°ëŠ¥**:
- ë°˜ì‘í˜• ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ (grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6)
- PagePreview ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
- ìë™ ìŠ¤í¬ë¡¤

### 6. `components/PagePreview.tsx`

**ì—­í• **: ê°œë³„ í˜ì´ì§€ ì¸ë„¤ì¼ ì¹´ë“œ

**Props**:
- `page`: ProcessedPage
- `thumbnail?`: string (Base64 ì´ë¯¸ì§€, ì˜µì…”ë„)

**ê¸°ëŠ¥**:
- ì¸ë„¤ì¼ ìë™ ìƒì„± (useEffect + PDFRenderer)
- Download ë²„íŠ¼ (ê°œë³„ í˜ì´ì§€ ë‹¤ìš´ë¡œë“œ)
- í˜ì´ì§€ ë²ˆí˜¸ ë±ƒì§€
- ë¡œë”© ìŠ¤í”¼ë„ˆ

### 7. `components/ThemeToggle.tsx`

**ì—­í• **: ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ ì „í™˜ í† ê¸€ ë²„íŠ¼

**ê¸°ëŠ¥**:
- ìš°ì¸¡ ìƒë‹¨ ê³ ì • (fixed top-4 right-4)
- ì•„ì´ì½˜ ìë™ ì „í™˜ (Sun â†” Moon)
- useTheme í›… ì‚¬ìš©

### 8. `lib/pdf/renderer.ts` (PDFRenderer í´ë˜ìŠ¤)

**ì—­í• **: PDF.jsë¥¼ ì‚¬ìš©í•˜ì—¬ PDF í˜ì´ì§€ë¥¼ ì´ë¯¸ì§€ë¡œ ë Œë”ë§

**ì£¼ìš” ë©”ì„œë“œ**:

```typescript
class PDFRenderer {
  // PDF.js ë™ì  ë¡œë“œ (í´ë¼ì´ì–¸íŠ¸ ì „ìš©)
  private async ensurePdfjs(): Promise<any>

  // PDF í˜ì´ì§€ë¥¼ ì´ë¯¸ì§€ë¡œ ë Œë”ë§
  async renderPage(
    pdfData: Uint8Array,
    pageNum: number,
    options?: RenderOptions
  ): Promise<string>

  // ì¸ë„¤ì¼ ìƒì„± (200x200px ê¸°ë³¸)
  async generateThumbnail(
    pdfData: Uint8Array,
    pageNum: number,
    size?: number
  ): Promise<string>

  // ëª¨ë“  í˜ì´ì§€ ì¸ë„¤ì¼ ì¼ê´„ ìƒì„±
  async generateAllThumbnails(
    pdfData: Uint8Array,
    size?: number,
    onProgress?: (current: number, total: number) => void
  ): Promise<string[]>
}
```

**íŠ¹ì§•**:
- í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì „ìš© (SSR ë°©ì§€)
- Canvas ê¸°ë°˜ ë Œë”ë§
- Base64 ì´ë¯¸ì§€ ë°˜í™˜
- ì§„í–‰ ìƒíƒœ ì½œë°± ì§€ì›

### 9. `hooks/useProgress.ts`

**ì—­í• **: ì§„í–‰ ìƒíƒœ ê´€ë¦¬ ë° í†µê³„ ê³„ì‚°

**ì œê³µ ë°ì´í„°**:
```typescript
interface ProgressData {
  currentPage: number
  totalPages: number
  currentStep: 'idle' | 'loading' | 'processing' | 'generating' | 'complete'
  elapsedTime: number
  estimatedTimeRemaining: number
  processedSize: number
  totalSize: number
  speed: number // pages per second
}
```

**ì œê³µ í•¨ìˆ˜**:
- `updateProgress()`: ì§„í–‰ ìƒíƒœ ì—…ë°ì´íŠ¸
- `reset()`: ìƒíƒœ ì´ˆê¸°í™”
- `getProgressPercentage()`: í¼ì„¼íŠ¸ ê³„ì‚°
- `formatTime()`: ì‹œê°„ í¬ë§·íŒ…
- `getStepLabel()`: ë‹¨ê³„ ë ˆì´ë¸”

### 10. `hooks/useTheme.ts`

**ì—­í• **: í…Œë§ˆ ìƒíƒœ ê´€ë¦¬ Hook

**ì§€ì› í…Œë§ˆ**:
- `light`: ë¼ì´íŠ¸ ëª¨ë“œ
- `dark`: ë‹¤í¬ ëª¨ë“œ

**ê¸°ëŠ¥**:
- localStorageì— í…Œë§ˆ ì €ì¥
- `toggleTheme()`: í…Œë§ˆ ì „í™˜ í•¨ìˆ˜
- `document.documentElement.classList.toggle('dark')` ìë™ ì ìš©
- í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ í…Œë§ˆ ë³µì›

**ë°˜í™˜ê°’**:
```typescript
{
  theme: 'light' | 'dark',
  toggleTheme: () => void
}
```

### 11. `components/ProcessingView.tsx`

**ì—­í• **: ì²˜ë¦¬ ì§„í–‰ ìƒíƒœ í‘œì‹œ

**Props**:
- `state`: PDFProcessorState
- `fileName`: string

**ê¸°ëŠ¥**:
- ì§„í–‰ ìƒíƒœ í‘œì‹œ (ë¡œë”©/ì²˜ë¦¬ ì¤‘)
- Progress ë°”
- í˜„ì¬ í˜ì´ì§€/ì „ì²´ í˜ì´ì§€ í‘œì‹œ
- íŒŒì¼ëª… í‘œì‹œ

---

## API ì—”ë“œí¬ì¸íŠ¸

**ì°¸ê³ **: í˜„ì¬ ë²„ì „ì€ 100% í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì²˜ë¦¬ë¡œ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ëª¨ë“  PDF ì²˜ë¦¬ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ìˆ˜í–‰ë˜ë©°, ì„œë²„ë¡œ íŒŒì¼ì´ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

---

## íƒ€ì… ì‹œìŠ¤í…œ

### `types/pdf.ts`

```typescript
// ë¶„í• ëœ í˜ì´ì§€ ë°ì´í„°
export interface ProcessedPage {
  pageNumber: number          // í˜ì´ì§€ ë²ˆí˜¸ (1-based)
  data: Uint8Array           // PDF ë°”ì´ë„ˆë¦¬ ë°ì´í„°
  fileName: string           // ìƒì„±ëœ íŒŒì¼ëª…
  size: number              // íŒŒì¼ í¬ê¸° (bytes)
}

// PDF ì²˜ë¦¬ ìƒíƒœ
export interface PDFProcessorState {
  status: 'idle' | 'loading' | 'processing' | 'complete' | 'error'
  currentPage: number        // í˜„ì¬ ì²˜ë¦¬ ì¤‘ì¸ í˜ì´ì§€
  totalPages: number         // ì „ì²´ í˜ì´ì§€ ìˆ˜
  progress: number          // ì§„í–‰ë¥  (0-100)
  error?: string            // ì—ëŸ¬ ë©”ì‹œì§€
  pages?: ProcessedPage[]   // ì²˜ë¦¬ ì™„ë£Œëœ í˜ì´ì§€
}

// ë‹¤ìš´ë¡œë“œ ì˜µì…˜
export interface DownloadOptions {
  format: 'individual' | 'zip'
  prefix?: string
  includePageNumbers?: boolean
}

// íŒŒì¼ ë©”íƒ€ë°ì´í„°
export interface PDFFile {
  filename: string           // ì„œë²„ ì €ì¥ íŒŒì¼ëª…
  originalName?: string      // ì›ë³¸ íŒŒì¼ëª…
  url: string               // ë‹¤ìš´ë¡œë“œ URL
  size: number              // íŒŒì¼ í¬ê¸°
  uploadedAt?: string | Date // ì—…ë¡œë“œ ì‹œê°„
}
```

---

## ìƒíƒœ ê´€ë¦¬ íŒ¨í„´

### ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ë° Props Drilling

```
App (page.tsx)
â”œâ”€ State: appState, currentFile, processedPages, processingState
â”œâ”€ ThemeToggle (ê³ ì • ìœ„ì¹˜)
â”‚
â”œâ”€ [appState === 'idle']
â”‚  â””â”€ DragDropUpload
â”‚     â””â”€ onUpload(file) â†’ handleFileUpload()
â”‚
â”œâ”€ [appState === 'processing']
â”‚  â”œâ”€ ProcessingView
â”‚  â”‚  â”œâ”€ state={processingState}
â”‚  â”‚  â””â”€ fileName={currentFile?.name}
â”‚  â”‚
â”‚  â””â”€ PDFProcessor (hidden, ì‹¤ì œ ì²˜ë¦¬)
â”‚     â”œâ”€ file={currentFile}
â”‚     â”œâ”€ onStateChange={setProcessingState}
â”‚     â”œâ”€ onProcessComplete={handleProcessComplete}
â”‚     â””â”€ onError={handleProcessError}
â”‚
â””â”€ [appState === 'complete']
   â””â”€ ResultView
      â”œâ”€ pages={processedPages}
      â”œâ”€ originalFileName={currentFile?.name}
      â”œâ”€ onReset={handleReset}
      â”‚
      â””â”€ PreviewGrid
         â””â”€ pages.map(page =>
            PagePreview
            â”œâ”€ page={page}
            â””â”€ (ì¸ë„¤ì¼ ìë™ ìƒì„±)
         )
```

**íŠ¹ì§•**:
- ë‹¨ì¼ í˜ì´ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜ (SPA)
- ìƒíƒœê°€ `page.tsx`ì— ì§‘ì¤‘ (ë‹¨ìˆœí•œ Props Drilling)
- 3ë‹¨ê³„ ìƒíƒœ ì „í™˜ (idle â†’ processing â†’ complete)
- Context API ë¶ˆí•„ìš” (ë³µì¡ë„ ë‚®ìŒ)
- ê° ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¨ì¼ ì±…ì„ ì›ì¹™ ì¤€ìˆ˜

---

## ì„±ëŠ¥ ìµœì í™” ì „ëµ

### 1. í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì²˜ë¦¬
- PDF ë¶„í• ì„ ë¸Œë¼ìš°ì €ì—ì„œ ìˆ˜í–‰í•˜ì—¬ ì„œë²„ ë¶€í•˜ ìµœì†Œí™”
- ë„¤íŠ¸ì›Œí¬ ì§€ì—° ì—†ìŒ

### 2. ë©”ëª¨ë¦¬ ê´€ë¦¬
- ë¶„í• ëœ í˜ì´ì§€ëŠ” Uint8Arrayë¡œ ë©”ëª¨ë¦¬ ë³´ê´€
- ì‚¬ìš©ìê°€ ë·° ì „í™˜ ì‹œ `setProcessedPages([])` ë¡œ ë©”ëª¨ë¦¬ í•´ì œ

### 3. ë¹„ë™ê¸° ì²˜ë¦¬
- `async/await` íŒ¨í„´ìœ¼ë¡œ UI ë¸”ë¡œí‚¹ ë°©ì§€
- ì§„í–‰ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ì—¬ UX ê°œì„ 

### 4. íŒŒì¼ í¬ê¸° ì œí•œ
- ìµœëŒ€ 100MB (ë¸Œë¼ìš°ì € ë©”ëª¨ë¦¬ ê³ ë ¤)
- ì´ˆê³¼ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ

---

## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 1. í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì²˜ë¦¬
- PDF ë‚´ìš©ì´ ì„œë²„ì— ì „ì†¡ë˜ì§€ ì•ŠìŒ (ì—…ë¡œë“œ íŒŒì¼ ì œì™¸)
- ë¶„í•  ì²˜ë¦¬ëŠ” 100% ë¸Œë¼ìš°ì € ë©”ëª¨ë¦¬ì—ì„œ ìˆ˜í–‰

### 2. íŒŒì¼ ê²€ì¦
- `lib/pdf/validator.ts` ì—ì„œ MIME íƒ€ì… ê²€ì¦
- íŒŒì¼ í™•ì¥ì ê²€ì¦
- ìµœëŒ€ í¬ê¸° ì œí•œ

### 3. XSS ë°©ì–´
- Next.jsì˜ ê¸°ë³¸ XSS ë°©ì–´ ê¸°ëŠ¥ í™œìš©
- ì‚¬ìš©ì ì…ë ¥ íŒŒì¼ëª… sanitize

### 4. CORS
- API RoutesëŠ” ë™ì¼ ë„ë©”ì¸ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥
- í•„ìš” ì‹œ CORS í—¤ë” ì¶”ê°€

---

## ë°°í¬ ë° í™˜ê²½ ì„¤ì •

### ê°œë°œ í™˜ê²½
```bash
npm run dev
# http://localhost:3000
```

### í”„ë¡œë•ì…˜ ë¹Œë“œ
```bash
npm run build
npm start
```

### í™˜ê²½ ë³€ìˆ˜ (`.env.local`)
```env
NEXT_PUBLIC_MAX_FILE_SIZE=104857600  # 100MB
UPLOAD_DIR=./uploads
```

### ì •ì  íŒŒì¼ ì„œë¹™
- `public/uploads/` â†’ `/uploads/` ê²½ë¡œë¡œ ì ‘ê·¼
- Next.js ìë™ ì •ì  íŒŒì¼ ì„œë¹™

---

## ê°œë°œ í˜„í™©

### í˜„ì¬ ë²„ì „ íŠ¹ì§•

âœ… **êµ¬í˜„ ì™„ë£Œ**:
- PDF ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì—…ë¡œë“œ
- í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ PDF ë¶„í•  (pdf-lib)
- í˜ì´ì§€ ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸° (pdfjs-dist)
- ê°œë³„ í˜ì´ì§€ ë‹¤ìš´ë¡œë“œ
- ì „ì²´ í˜ì´ì§€ ZIP ë‹¤ìš´ë¡œë“œ (jszip)
- ë‹¤í¬ ëª¨ë“œ / ë¼ì´íŠ¸ ëª¨ë“œ ì „í™˜ (localStorage ì €ì¥)
- ë°˜ì‘í˜• ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ
- ì§„í–‰ ìƒíƒœ í‘œì‹œ (Progress bar)
- shadcn/ui ì»´í¬ë„ŒíŠ¸ ì‹œìŠ¤í…œ

ğŸ“‹ **í–¥í›„ ê°œì„  ê°€ëŠ¥ ì‚¬í•­**:
- í˜ì´ì§€ ì„ íƒ ê¸°ëŠ¥ (íŠ¹ì • í˜ì´ì§€ë§Œ ë¶„í• )
- í˜ì´ì§€ ë³‘í•© ê¸°ëŠ¥
- í˜ì´ì§€ ìˆœì„œ ë³€ê²½ (Drag & Drop)
- ë‹¤êµ­ì–´ ì§€ì› (i18n)
- ìƒì„¸ ì§„í–‰ í†µê³„ (ì‹œê°„, ì†ë„)

## í™•ì¥ ê°€ëŠ¥ì„±

### ì•„í‚¤í…ì²˜ ê°œì„  ë°©í–¥
- **ìƒíƒœ ê´€ë¦¬**: Zustand ë˜ëŠ” Jotai ë„ì… (ë³µì¡ë„ ì¦ê°€ ì‹œ)
- **ì—ëŸ¬ ì²˜ë¦¬**: Sentry í†µí•©
- **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: Next.js Analytics
- **í…ŒìŠ¤íŠ¸**: Jest + React Testing Library
- **PWA ì§€ì›**: Service Worker, Offline ëª¨ë“œ

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ

### PDF ì²˜ë¦¬ ì‹¤íŒ¨
**ì¦ìƒ**: "Failed to load PDF file" ì—ëŸ¬
**ì›ì¸**: ì†ìƒëœ PDF ë˜ëŠ” ë¹„í‘œì¤€ PDF
**í•´ê²°**: pdf-libì´ ì§€ì›í•˜ì§€ ì•ŠëŠ” PDF í˜•ì‹, ë‹¤ë¥¸ PDFë¡œ í…ŒìŠ¤íŠ¸

### ë©”ëª¨ë¦¬ ë¶€ì¡±
**ì¦ìƒ**: ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ì‹œ ë¸Œë¼ìš°ì € í¬ë˜ì‹œ
**ì›ì¸**: ë¸Œë¼ìš°ì € ë©”ëª¨ë¦¬ í•œê³„ ì´ˆê³¼
**í•´ê²°**:
- íŒŒì¼ í¬ê¸° ì œí•œ ê°•í™”
- Web Workerë¡œ ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬
- ì²­í¬ ë‹¨ìœ„ ì²˜ë¦¬ êµ¬í˜„

### ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨
**ì¦ìƒ**: ZIP ë‹¤ìš´ë¡œë“œ ì‹œ íŒŒì¼ ì†ìƒ
**ì›ì¸**: jszip ìƒì„± ì˜¤ë¥˜
**í•´ê²°**:
- Blob ìƒì„± ì˜µì…˜ í™•ì¸
- ë¸Œë¼ìš°ì € ì½˜ì†” ì—ëŸ¬ ë¡œê·¸ í™•ì¸

### PDF.js SSR ì—ëŸ¬ (Phase 2)
**ì¦ìƒ**: `TypeError: Object.defineProperty called on non-object`
**ì›ì¸**: pdfjs-distê°€ ì„œë²„ ì‚¬ì´ë“œì—ì„œ ì‹¤í–‰ ì‹œë„
**í•´ê²°**:
- `PDFRenderer.ensurePdfjs()` ë©”ì„œë“œë¡œ ë™ì  import
- `typeof window !== 'undefined'` ì²´í¬
- ì»´í¬ë„ŒíŠ¸ë¥¼ `'use client'`ë¡œ ë§ˆí¬

### ì¸ë„¤ì¼ ìƒì„± ì‹¤íŒ¨
**ì¦ìƒ**: ì¸ë„¤ì¼ì´ í‘œì‹œë˜ì§€ ì•Šê±°ë‚˜ ë¹ˆ ì´ë¯¸ì§€
**ì›ì¸**: Canvas ë Œë”ë§ ì‹¤íŒ¨ ë˜ëŠ” PDF ë°ì´í„° ì†ìƒ
**í•´ê²°**:
- ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì—ëŸ¬ í™•ì¸
- PDF.js Worker URL í™•ì¸ (CDN ì ‘ê·¼ ê°€ëŠ¥ ì—¬ë¶€)
- Canvas í¬ê¸° ì œí•œ í™•ì¸

### ë‹¤í¬ ëª¨ë“œê°€ ì ìš©ë˜ì§€ ì•ŠìŒ
**ì¦ìƒ**: í…Œë§ˆ ì „í™˜ ì‹œ ìƒ‰ìƒ ë³€ê²½ ì—†ìŒ
**ì›ì¸**: Tailwind CSS ë‹¤í¬ ëª¨ë“œ ì„¤ì • ëˆ„ë½
**í•´ê²°**:
- `tailwind.config.js`ì— `darkMode: 'class'` ì¶”ê°€
- HTML ë£¨íŠ¸ì— `dark` í´ë˜ìŠ¤ ì ìš© í™•ì¸
- CSS ìºì‹œ í´ë¦¬ì–´ í›„ ì¬ì‹œì‘

---

## ì°¸ê³  ë¬¸ì„œ

- [Next.js Documentation](https://nextjs.org/docs)
- [pdf-lib Documentation](https://pdf-lib.js.org/)
- [pdfjs-dist Documentation](https://mozilla.github.io/pdf.js/)
- [JSZip Documentation](https://stuk.github.io/jszip/)
- [TypeScript Documentation](https://www.typescriptlang.org/)

---

## ë³€ê²½ ì´ë ¥

### v2.5 (2025-10-02) - í˜„ì¬ ë²„ì „
- **ë‹¤í¬ ëª¨ë“œ êµ¬í˜„**:
  - ì „ì²´ ì„œë¹„ìŠ¤ ë‹¤í¬ ëª¨ë“œ ê¸°ë³¸ ì ìš©
  - ThemeToggle ì»´í¬ë„ŒíŠ¸ ì¶”ê°€ (ìš°ì¸¡ ìƒë‹¨ ê³ ì •)
  - useTheme Hook êµ¬í˜„ (localStorage ì—°ë™)
  - Tailwind CSS dark mode ì„¤ì • (class ê¸°ë°˜)
  - globals.css ë‹¤í¬ ëª¨ë“œ CSS ë³€ìˆ˜ ì •ì˜
- **ë²„íŠ¼ ìŠ¤íƒ€ì¼ ê°œì„ **:
  - outline ë²„íŠ¼ í…ìŠ¤íŠ¸ ìƒ‰ìƒ ìˆ˜ì • (ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë‘ ëª…í™•í•˜ê²Œ í‘œì‹œ)
  - í˜¸ë²„ ìƒíƒœ í…ìŠ¤íŠ¸ ìƒ‰ìƒ ìµœì í™”
- **ì•„í‚¤í…ì²˜ ë¬¸ì„œ ì—…ë°ì´íŠ¸**:
  - í”„ë¡œì íŠ¸ êµ¬ì¡° ìµœì‹ í™”
  - ì»´í¬ë„ŒíŠ¸ ì„¤ëª… ì—…ë°ì´íŠ¸
  - ë°ì´í„° í”Œë¡œìš°ì— í…Œë§ˆ ì „í™˜ í”Œë¡œìš° ì¶”ê°€

### v2.0 (2025-09-30)
- shadcn/ui ì»´í¬ë„ŒíŠ¸ ì‹œìŠ¤í…œ ë„ì…
- ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸° ê·¸ë¦¬ë“œ êµ¬í˜„
- PDFRenderer í´ë˜ìŠ¤ êµ¬í˜„ (pdfjs-dist)
- 3ë‹¨ê³„ ìƒíƒœ ê´€ë¦¬ (idle/processing/complete)
- ë°˜ì‘í˜• ë””ìì¸

### v1.0 (2025-09-28)
- MVP ê¸°ë³¸ ê¸°ëŠ¥
- PDF ì—…ë¡œë“œ, ë¶„í• , ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥
- í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì²˜ë¦¬

---

**ë¬¸ì„œ ë²„ì „**: 2.5
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-10-02
**ì‘ì„±ì**: AI Assistant